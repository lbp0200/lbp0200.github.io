<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>
        
        丑锉穷的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="VPS，电脑主机，视频转码，无线路由器，PHP，Python，数据库">
<meta property="og:type" content="website">
<meta property="og:title" content="丑锉穷的博客">
<meta property="og:url" content="http://www.liuboping.com/page/4/index.html">
<meta property="og:site_name" content="丑锉穷的博客">
<meta property="og:description" content="VPS，电脑主机，视频转码，无线路由器，PHP，Python，数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="丑锉穷的博客">
<meta name="twitter:description" content="VPS，电脑主机，视频转码，无线路由器，PHP，Python，数据库">
    
    
    
    <!--<link href="/css/sourcecodepro.css" rel="stylesheet" type="text/css">-->
    <!--<link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">-->
    <style rel="stylesheet" type="text/css">
        /* source-code-pro-normal - latin */
        @font-face {
            font-family: 'Source Code Pro';
            font-style: normal;
            font-weight: regular;
            src: url('//lib.baomitu.com/fonts/source-code-pro/source-code-pro-v6-latin-regular.eot'); /* IE9 Compat Modes */
            src: local('Source Code Pro'), local('SourceCode Pro-Normal'),
            url('//lib.baomitu.com/fonts/source-code-pro/source-code-pro-v6-latin-regular.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */ url('//lib.baomitu.com/fonts/source-code-pro/source-code-pro-v6-latin-regular.woff2') format('woff2'), /* Super Modern Browsers */ url('//lib.baomitu.com/fonts/source-code-pro/source-code-pro-v6-latin-regular.woff') format('woff'), /* Modern Browsers */ url('//lib.baomitu.com/fonts/source-code-pro/source-code-pro-v6-latin-regular.ttf') format('truetype'), /* Safari, Android, iOS */ url('//lib.baomitu.com/fonts/source-code-pro/source-code-pro-v6-latin-regular.svg#SourceCode Pro') format('svg'); /* Legacy iOS */
        }
    </style>
    

    <link rel="stylesheet" href="//lib.baomitu.com/twitter-bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.5.0/css/font-awesome.min.css"
          integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

    <link rel="stylesheet" href="/css/styles.css">
    
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?392a2505dc4c3e6f22fdb4d7485a0d42";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</head>

<body>

<a id="myModal" class="myad modal fade" tabindex="-1" href="https://s.click.taobao.com/t?e=m%3D2%26s%3DFN8PBDx%2FWswcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMasv%2FAl9uu6wMMgx22UI05aV207OvaxmSB7QiNy9A8ZcFSmFqvRHSOR6J537VfkHL02srC8Mk09eQgZss1jm63jO54LQ%2FVw1LxISvUSwasgDIStehaIsPpQW95D0t3aOipLIwx8%2BuZb7GJftcY9O2y1OVPhIvNgOIM3%2FLfsenHbhIYULNg46oBA%3D" target="_blank"></a>

<nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/">首页</a></li>
        
          <li><a class=""
                 href="/archives/">归档</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="container">
    <div class="blog-header">
  <h1 class="blog-title">丑锉穷的博客</h1>
  
    <p class="lead blog-description">一个软件工程师</p>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
            
  
    <article id="post-京东主机" class="article article-type-post" itemscope
         itemprop="blogPost">

    <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017-01-12/京东主机.html">怎样通过租用京东云主机搭建一个高性能高可用的网站</a>
    </h1>
  


    </header>

    <div class="article-meta">
        <div class="article-datetime">
  <a href="/2017-01-12/京东主机.html" class="article-date"><time datetime="2017-01-12T08:56:00.000Z" itemprop="datePublished">2017-01-12</time></a>
</div>

        
        <div class="article-author">刘博平</div>
        
        

    </div>
    <div class="article-inner">

        <div class="article-entry" itemprop="articleBody">
            
            <blockquote>
<p>很多朋友问我：“<code>云主机租用 云主机免费 云主机价格 云主机代理 云主机服务 云主机租用代理 云主机促销 云主机哪家好 云主机公司 云主机租用价</code>”。<br>今天无意中了解了<a href="http://union-click.jd.com/jdc?d=Nmcud1" target="_blank" rel="external">京东云主机</a>，发现<a href="http://union-click.jd.com/jdc?d=Nmcud1" target="_blank" rel="external">京东云主机</a>部署网站非常方便，非常适合常用的网站架构。下面就和大家分享下怎样使用<a href="http://union-click.jd.com/jdc?d=Nmcud1" target="_blank" rel="external">京东云主机</a>部署一个常见的高性能、高可用、大数据、大并发、可以横向扩展的LNMP网站。</p>
</blockquote>
<div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_SVG_Hidden"></div><svg><defs id="MathJax_SVG_glyphs"><path id="MJMATHI-6E" stroke-width="1" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></defs></svg></div><div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="mermaid graph" title="点击查看大图" data-anchor-id="lofj" data-processed="true"><svg id="mermaidChart107" xmlns="http://www.w3.org/2000/svg" height="100%" viewbox="0 0 470.3499984741211 262.046875" style="max-width:470.3499984741211px;"><style type="text/css" title="mermaid-svg-internal-css"> .node&gt;rect { ; } .node text  { fill:#000; stroke:none; font-weight:300; font-family:”Helvetica Neue”,Helvetica,Arial,sans-serf; font-size:14px; } .edgeLabel text  { fill:#000; stroke:none; font-weight:300; font-family:”Helvetica Neue”,Helvetica,Arial,sans-serf; font-size:14px; } .cluster rect  { rx:4px; fill: rgb(255, 255, 222); rx: 4px; stroke: rgb(170, 170, 51); stroke-width: 1px; } .label, .badge { display: inline-block; padding: 2px 4px; font-size: 11.844px; font-weight: bold; line-height: 14px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.247059) 0px -1px 0px; white-space: nowrap; vertical-align: baseline; background-color: rgb(153, 153, 153);} .label { border-radius: 3px;} .mermaid .label { color: rgb(51, 51, 51);} .node rect, .node circle, .node ellipse, .node polygon { fill: rgb(236, 236, 255); stroke: rgb(204, 204, 255); stroke-width: 1px;} .edgePath .path { stroke: rgb(51, 51, 51);} .edgeLabel { background-color: rgb(232, 232, 232);} .cluster rect { fill: rgb(255, 255, 222) !important; rx: 4 !important; stroke: rgb(170, 170, 51) !important; stroke-width: 1px !important;} .cluster text { fill: rgb(51, 51, 51);} </style><g><g class="output"><g class="clusters"/><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M92.9372605152156,95.36069877815505L143.5999984741211,37.0078125L168.8265609741211,37.0078125" marker-end="url(#arrowhead1381)" style="stroke: #333; stroke-width: 1.5px;fill:none"/><defs><marker id="arrowhead1381" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"/></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M119.09999923706057,121.52343750000001L143.5999984741211,121.0234375L168.8265609741211,121.0234375" marker-end="url(#arrowhead1382)" style="stroke: #333; stroke-width: 1.5px;fill:none"/><defs><marker id="arrowhead1382" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"/></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M92.93726123133445,147.68617703160507L143.5999984741211,205.0390625L168.5999984741211,205.0390625" marker-end="url(#arrowhead1383)" style="stroke: #333; stroke-width: 1.5px;fill:none"/><defs><marker id="arrowhead1383" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"/></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M286.0140609741211,37.0078125L311.2406234741211,37.0078125L352.6624071176121,85.30553138779163" marker-end="url(#arrowhead1384)" style="stroke: #333; stroke-width: 1.5px;fill:none"/><defs><marker id="arrowhead1384" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"/></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M286.0140609741211,121.0234375L311.2406234741211,121.0234375L336.2406234741211,121.0234375" marker-end="url(#arrowhead1385)" style="stroke: #333; stroke-width: 1.5px;fill:none"/><defs><marker id="arrowhead1385" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"/></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M286.2406234741211,205.0390625L311.2406234741211,205.0390625L352.6624071176121,156.74134361220837" marker-end="url(#arrowhead1386)" style="stroke: #333; stroke-width: 1.5px;fill:none"/><defs><marker id="arrowhead1386" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="fill: #333"/></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"/><text><tspan xml:space="preserve" dy="1em" x="1"/></text></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"/><text><tspan xml:space="preserve" dy="1em" x="1"/></text></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"/><text><tspan xml:space="preserve" dy="1em" x="1"/></text></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"/><text><tspan xml:space="preserve" dy="1em" x="1"/></text></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"/><text><tspan xml:space="preserve" dy="1em" x="1"/></text></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"/><text><tspan xml:space="preserve" dy="1em" x="1"/></text></g></g></g><g class="nodes"><g class="node" id="A" transform="translate(69.29999923706055,121.0234375)" style="opacity: 1;"><polygon points="49.300000000000004,0 98.60000000000001,-49.300000000000004 49.300000000000004,-98.60000000000001 0,-49.300000000000004" rx="5" ry="5" transform="translate(-49.300000000000004,49.300000000000004)"/><g class="label" transform="translate(0,0)"><g transform="translate(-34.6171875,-7.0078125)"><text><tspan xml:space="preserve" dy="1em" x="1">Nginx 公网IP</tspan></text></g></g></g><g class="node" id="B1" transform="translate(227.4203109741211,37.0078125)" style="opacity: 1;"><rect rx="0" ry="0" x="-58.59375" y="-17.0078125" width="117.1875" height="34.015625"/><g class="label" transform="translate(0,0)"><g transform="translate(-48.59375,-7.0078125)"><text><tspan xml:space="preserve" dy="1em" x="1">PHP-FPM 1 内网IP</tspan></text></g></g></g><g class="node" id="B2" transform="translate(227.4203109741211,121.0234375)" style="opacity: 1;"><rect rx="0" ry="0" x="-58.59375" y="-17.0078125" width="117.1875" height="34.015625"/><g class="label" transform="translate(0,0)"><g transform="translate(-48.59375,-7.0078125)"><text><tspan xml:space="preserve" dy="1em" x="1">PHP-FPM 2 内网IP</tspan></text></g></g></g><g class="node" id="Bn" transform="translate(227.4203109741211,205.0390625)" style="opacity: 1;"><rect rx="0" ry="0" x="-58.8203125" y="-17.0078125" width="117.640625" height="34.015625"/><g class="label" transform="translate(0,0)"><g transform="translate(-48.8203125,-7.0078125)"><text><tspan xml:space="preserve" dy="1em" x="1">PHP-FPM n 内网IP</tspan></text></g></g></g><g class="node" id="C" transform="translate(383.2953109741211,121.0234375)" style="opacity: 1;"><circle x="-47.0546875" y="-17.0078125" r="47.0546875"/><g class="label" transform="translate(0,0)"><g transform="translate(-37.0546875,-7.0078125)"><text><tspan xml:space="preserve" dy="1em" x="1">数据库 内网IP</tspan></text></g></g></g></g></g></g></svg></div></div>

<p>上面是这种网站的架构，可能还要有Redis缓存，算上备份服务器，大概需要6-7台服务器，但是唯一需要公网IP的只有Nginx，访问其他服务器只需在Nginx服务器上开ssh（千万不能用默认的22端口），做个跳板就好了。</p>
<blockquote>
<p>安利下自己，本人就职于搜狐，比较擅长搭建这套架构，有需要的可以通过网页底部的邮件联系我，7*24小时噢，按天或者小时计费，无法开发票。</p>
</blockquote>
<h3 id="先点击http-www-jcloud-com-，进去看一看。"><a href="#先点击http-www-jcloud-com-，进去看一看。" class="headerlink" title="先点击http://www.jcloud.com/，进去看一看。"></a>先点击<a href="http://union-click.jd.com/jdc?d=Nmcud1" target="_blank">http://www.jcloud.com/</a>，进去看一看。</h3><p>按照这种架构在<a href="http://union-click.jd.com/jdc?d=Nmcud1" target="_blank" rel="external">京东云主机</a>上搭建网站的步骤如下：</p>
<ul>
<li><strong>购买云主机服务器</strong><br>购买5台<a href="http://union-click.jd.com/jdc?d=Nmcud1" target="_blank" rel="external">京东云主机</a>，这时这5台主机都不能通过外网访问。云主机有2种计费方式，应该根据业务的不同来选择，否则后面就是大坑。<ul>
<li><strong>按配置计费</strong><br>适合经常搞活动的网站，比如电商搞个秒杀、搞地推，流量突然暴增，可以直接提高服务器的配置，不用修改一行代码就可以做到，建议创业公司选择，业务变化轻松应对。</li>
<li><strong>包年包月计费</strong><br>适合小站如个人博客，一直就没有太多的流量；再就是大站，很平稳。</li>
</ul>
</li>
<li><strong>配置私有内网</strong><br>5台主机放入通一个私有网络，让这5台主机能够互相访问，而其他电脑不能访问，提高安全性。</li>
<li><strong>购买公网IP</strong><br>将购买公网IP绑定到刚才买的Nginx云主机服务器上，这样网站就能够被访问到了。公网IP和云主机一样也有2种计费方式：按配置计费和包年包月计费，就像选云主机一样选择就是了，这里还是推荐创业公司选择按配置计费。</li>
<li><strong>域名及备案</strong><br>按照网站说明操作就可以了，或者联系客服。</li>
</ul>
<p>如果觉得太复杂，京东云提供了一些现成的解决方案，如电商、物流、金融、智能云、产业云……京东云的售前目前也比较主动，我今天刚注册了账号，就打电话给我。按照这种情况看，选择京东云之后，京东会给予很详细的技术指导。</p>
<h3 id="京东云官网http-www-jcloud-com-。"><a href="#京东云官网http-www-jcloud-com-。" class="headerlink" title="京东云官网http://www.jcloud.com/。"></a>京东云官网<a href="http://union-click.jd.com/jdc?d=Nmcud1" target="_blank">http://www.jcloud.com/</a>。</h3>
            
        </div>

        
        

        

        <footer class="article-footer">
            
            
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/云计算/">云计算</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>


        </footer>
    </div>
    
</article>



  
    <article id="post-nginx将日志通过rsyslog保存" class="article article-type-post" itemscope
         itemprop="blogPost">

    <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017-01-11/nginx将日志通过rsyslog保存.html">nginx将日志通过rsyslog保存</a>
    </h1>
  


    </header>

    <div class="article-meta">
        <div class="article-datetime">
  <a href="/2017-01-11/nginx将日志通过rsyslog保存.html" class="article-date"><time datetime="2017-01-11T10:53:49.000Z" itemprop="datePublished">2017-01-11</time></a>
</div>

        
        <div class="article-author">刘博平</div>
        
        

    </div>
    <div class="article-inner">

        <div class="article-entry" itemprop="articleBody">
            
            <blockquote>
<p>nginx版本大于1.7.1才可以</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">error_log syslog:server=unix:/dev/log,facility=local7,tag=nginx,severity=error;</div><div class="line">access_log syslog:server=unix:/dev/log,facility=local7,tag=nginx,severity=info main;</div></pre></td></tr></table></figure>
<p>剩下的事情交给rsyslog吧，是保存到本地，还是发送给远端集中管理，都随意。</p>

            
        </div>

        
        

        

        <footer class="article-footer">
            
            

        </footer>
    </div>
    
</article>



  
    <article id="post-Linux递归改变文件夹内所有文件的编码" class="article article-type-post" itemscope
         itemprop="blogPost">

    <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017-01-11/Linux递归改变文件夹内所有文件的编码.html">Linux递归改变文件夹内所有文件的编码</a>
    </h1>
  


    </header>

    <div class="article-meta">
        <div class="article-datetime">
  <a href="/2017-01-11/Linux递归改变文件夹内所有文件的编码.html" class="article-date"><time datetime="2017-01-11T10:51:57.000Z" itemprop="datePublished">2017-01-11</time></a>
</div>

        
        <div class="article-author">刘博平</div>
        
        

    </div>
    <div class="article-inner">

        <div class="article-entry" itemprop="articleBody">
            
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find . -type f -exec enca -L zh_CN -x UTF-8 &#123;&#125; \;</div></pre></td></tr></table></figure>
            
        </div>

        
        

        

        <footer class="article-footer">
            
            

        </footer>
    </div>
    
</article>



  
    <article id="post-PHP给多维数组赋值避免notice警告" class="article article-type-post" itemscope
         itemprop="blogPost">

    <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017-01-11/PHP给多维数组赋值避免notice警告.html">PHP给多维数组赋值避免notice警告</a>
    </h1>
  


    </header>

    <div class="article-meta">
        <div class="article-datetime">
  <a href="/2017-01-11/PHP给多维数组赋值避免notice警告.html" class="article-date"><time datetime="2017-01-11T10:50:28.000Z" itemprop="datePublished">2017-01-11</time></a>
</div>

        
        <div class="article-author">刘博平</div>
        
        

    </div>
    <div class="article-inner">

        <div class="article-entry" itemprop="articleBody">
            
            <figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/**</span></div><div class="line"> * 给多维数组复制,避免notice警告</div><div class="line"> * <span class="doctag">@param</span> $data array</div><div class="line"> * <span class="doctag">@param</span> $key_arr array</div><div class="line"> * <span class="doctag">@param</span> $value mixed</div><div class="line"> * <span class="doctag">@return</span> void</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">array_multidimensional_set</span><span class="params">(&amp;$data, $key_arr, $value)</span></span></div><div class="line">&#123;</div><div class="line">    $cur_arr = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">foreach</span> ($key_arr <span class="keyword">as</span> $key) &#123;</div><div class="line">        <span class="keyword">if</span> ($cur_arr === <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (!<span class="keyword">isset</span>($data[$key])) &#123;</div><div class="line">                $data[$key] = <span class="keyword">array</span>();</div><div class="line">            &#125;</div><div class="line">            $cur_arr =&amp; $data[$key];</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> (!<span class="keyword">isset</span>($cur_arr[$key])) &#123;</div><div class="line">                $cur_arr[$key] = <span class="keyword">array</span>();</div><div class="line">            &#125;</div><div class="line">            $cur_arr = &amp;$cur_arr[$key];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    $cur_arr = $value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
            
        </div>

        
        

        

        <footer class="article-footer">
            
            

        </footer>
    </div>
    
</article>



  
    <article id="post-php模仿tail实现读取log文件" class="article article-type-post" itemscope
         itemprop="blogPost">

    <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017-01-11/php模仿tail实现读取log文件.html">php模仿tail实现读取log文件</a>
    </h1>
  


    </header>

    <div class="article-meta">
        <div class="article-datetime">
  <a href="/2017-01-11/php模仿tail实现读取log文件.html" class="article-date"><time datetime="2017-01-11T10:16:25.000Z" itemprop="datePublished">2017-01-11</time></a>
</div>

        
        <div class="article-author">刘博平</div>
        
        

    </div>
    <div class="article-inner">

        <div class="article-entry" itemprop="articleBody">
            
            <h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'ajax'</span>])) &#123;</div><div class="line">            <span class="keyword">$this</span>-&gt;autoRender = <span class="keyword">false</span>;</div><div class="line">            <span class="keyword">if</span> (RunTime === \App\Library\Resources::Development) &#123;</div><div class="line">                $handle = fopen(LOGS . <span class="string">'debug.log'</span>, <span class="string">'r'</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                $handle = fopen(<span class="string">'/tmp/111.log'</span>, <span class="string">'r'</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (<span class="keyword">isset</span>($_SESSION[<span class="string">'offset'</span>])) &#123;</div><div class="line">                $data = stream_get_contents($handle, <span class="number">-1</span>, $_SESSION[<span class="string">'offset'</span>]);</div><div class="line">                $_SESSION[<span class="string">'offset'</span>] += strlen($data);</div><div class="line">                <span class="keyword">echo</span> nl2br($data);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                fseek($handle, <span class="number">0</span>, SEEK_END);</div><div class="line">                $_SESSION[<span class="string">'offset'</span>] = ftell($handle);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">exit</span>();</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://creativecouple.github.com/jquery-timing/jquery-timing.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line">    $(function () &#123;</div><div class="line">        $.repeat(1000, function () &#123;</div><div class="line">            $.get('/unit/showlog?ajax', function (data) &#123;</div><div class="line">                var tail = $('#tail');</div><div class="line">                if (tail.height() &gt; 768)</div><div class="line">                    tail.text(data);</div><div class="line">                else</div><div class="line">                    tail.append(data);</div><div class="line">            &#125;);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tail"</span>&gt;</span>Starting up...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
            
        </div>

        
        

        

        <footer class="article-footer">
            
            

        </footer>
    </div>
    
</article>



  
    <article id="post-视频转码速度最快质量最好的方法" class="article article-type-post" itemscope
         itemprop="blogPost">

    <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017-01-11/视频转码速度最快质量最好的方法.html">视频转码速度最快质量最好的方法</a>
    </h1>
  


    </header>

    <div class="article-meta">
        <div class="article-datetime">
  <a href="/2017-01-11/视频转码速度最快质量最好的方法.html" class="article-date"><time datetime="2017-01-11T10:02:46.000Z" itemprop="datePublished">2017-01-11</time></a>
</div>

        
        <div class="article-author">刘博平</div>
        
        

    </div>
    <div class="article-inner">

        <div class="article-entry" itemprop="articleBody">
            
            <blockquote>
<p>NVIDIA英伟达显卡不但能玩游戏，还可以使用它进行高速视频转码，转码速度又快、质量又好。著名开源视频转码软件-视频转换器——ffmpeg提供了支持，但是需要安装显卡驱动，并自己编译。</p>
</blockquote>
<h3 id="操作系统-Ubuntu-16-04"><a href="#操作系统-Ubuntu-16-04" class="headerlink" title="操作系统 Ubuntu 16.04"></a>操作系统 Ubuntu 16.04</h3><ul>
<li>系统设置-软件和更新-附加驱动-安装最新NVIDIA显卡驱动</li>
<li>安装cuda（不清楚是否必须）</li>
</ul>
<h3 id="ffmpeg的编译"><a href="#ffmpeg的编译" class="headerlink" title="ffmpeg的编译"></a>ffmpeg的编译</h3><p>下载源码，参考<a href="https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu#ffmpeg" target="_blank" rel="external">https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu#ffmpeg</a></p>
<p>编译命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">PATH=<span class="string">"<span class="variable">$HOME</span>/bin:<span class="variable">$PATH</span>"</span> PKG_CONFIG_PATH=<span class="string">"<span class="variable">$HOME</span>/ffmpeg_build/lib/pkgconfig"</span> ./configure \</div><div class="line">  --prefix=<span class="string">"<span class="variable">$HOME</span>/ffmpeg_build"</span> \</div><div class="line">  --pkg-config-flags=<span class="string">"--static"</span> \</div><div class="line">  --extra-cflags=<span class="string">"-I<span class="variable">$HOME</span>/ffmpeg_build/include"</span> \</div><div class="line">  --extra-ldflags=<span class="string">"-L<span class="variable">$HOME</span>/ffmpeg_build/lib"</span> \</div><div class="line">  --bindir=<span class="string">"<span class="variable">$HOME</span>/bin"</span> \</div><div class="line">  --enable-gpl \</div><div class="line">  --enable-libass \</div><div class="line">  --enable-libfdk-aac \</div><div class="line">  --enable-libfreetype \</div><div class="line">  --enable-libmp3lame \</div><div class="line">  --enable-libopus \</div><div class="line">  --enable-libtheora \</div><div class="line">  --enable-libvorbis \</div><div class="line">  --enable-libvpx \</div><div class="line">  --enable-libx264 \</div><div class="line">  --enable-libx265 \</div><div class="line">  --enable-nonfree \</div><div class="line">  --enable-nvenc <span class="comment">#开启显卡转码</span></div><div class="line">PATH=<span class="string">"<span class="variable">$HOME</span>/bin:<span class="variable">$PATH</span>"</span> make</div><div class="line">make install</div><div class="line">make distclean</div><div class="line"><span class="built_in">hash</span> -r</div></pre></td></tr></table></figure></p>
<p><a href="https://trac.ffmpeg.org/wiki/HWAccelIntro#CUDACUVIDNvDecode" target="_blank" rel="external">支持更多显卡的编译参数</a></p>
<p>这时，在$HOME/bin就应该看到ffmpeg的三个程序了</p>
<h3 id="开始转码"><a href="#开始转码" class="headerlink" title="开始转码"></a>开始转码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ffmpeg -i xart.13.12.31.misty.and.then.there.was.you.mp4 -c:v h264_nvenc xart.mkv</div></pre></td></tr></table></figure>
<p>1080P的视频从800多兆压缩到300多，还是不错的，1080P转码速度是3.3倍速，即1小时的视频转码时间是不到20分钟，720P的可以更快。</p>

            
        </div>

        
        

        

        <footer class="article-footer">
            
            

        </footer>
    </div>
    
</article>



  
    <article id="post-美国洛杉矶VPS直连电信联通支付宝付款" class="article article-type-post" itemscope
         itemprop="blogPost">

    <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017-01-10/美国洛杉矶VPS直连电信联通支付宝付款.html">搬瓦工VPS洛杉矶电信联通直连套餐看油管轻松1080P</a>
    </h1>
  


    </header>

    <div class="article-meta">
        <div class="article-datetime">
  <a href="/2017-01-10/美国洛杉矶VPS直连电信联通支付宝付款.html" class="article-date"><time datetime="2017-01-10T10:42:05.000Z" itemprop="datePublished">2017-01-10</time></a>
</div>

        
        <div class="article-author">刘博平</div>
        
        

    </div>
    <div class="article-inner">

        <div class="article-entry" itemprop="articleBody">
            
            <blockquote>
<p>摘要: 搬瓦工，搬瓦工VPS，美国vps，美国vps租用，美国vps评测，美国vps出租，美国vps推荐，美国vps 翻墙 哪个地区比较好，美国vps哪个比较好，vps国内访问速度最快，vps 翻墙，vps 翻墙软件</p>
<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>无如何优化，北京移动节假日上午 YouTube 速度 8000Kb ，晚上也有 2000Kb+的速度。<br>可以做一个网站。笔者搭建用ninx搭建了一个网站，下载视频文件的速度轻松2~3M每秒，相当给力。美国VPS速度最快也就这样了。<br>鉴于人民币一直在贬值，应该赶快入手一个。</p>
</blockquote>
<h3 id="全球ping测试："><a href="#全球ping测试：" class="headerlink" title="全球ping测试："></a>全球ping测试：</h3><p><img src="http://wx3.sinaimg.cn/large/0060hWkWly1fc3v2qc0jyj30g108mq40.jpg" alt="搬瓦工VPS洛杉矶电信联通直连套餐看油管轻松1080P"></p>
<h3 id="套餐"><a href="#套餐" class="headerlink" title="套餐"></a>套餐</h3><ol>
<li><p>SSD: 10 GB RAID-10<br>内存: 512 MB<br>CPU: 1核<br>流量: 每月1000G<br>购买链接：<a href="https://bwh1.net/aff.php?aff=12296&amp;pid=34" target="_blank" rel="external">https://bwh1.net/aff.php?aff=12296&amp;pid=34</a></p>
</li>
<li><p>SSD: 10 GB RAID-10<br>内存: 1G<br>CPU: 1核<br>流量: 每月2000G<br>购买链接：<a href="https://bwh1.net/aff.php?aff=12296&amp;pid=35" target="_blank" rel="external">https://bwh1.net/aff.php?aff=12296&amp;pid=35</a></p>
</li>
</ol>
<p><img src="http://wx1.sinaimg.cn/large/0060hWkWly1fby3mceovjj30tq0gotgs.jpg" alt="搬瓦工VPS洛杉矶电信联通直连套餐看油管轻松1080P"></p>

            
        </div>

        
        

        

        <footer class="article-footer">
            
            

        </footer>
    </div>
    
</article>



  


  <div id="page-nav">
    <nav><ul class="pagination"><li><a class="page-prev" rel="prev" href="/page/3/"><i class="fa fa-chevron-left"></i> 前一页</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><a class="page-number" href="/page/3/">3</a></li><li class="active"><span class="page-number">4</span></li><li class="disabled"><span class="page-next">下一页 <i class="fa fa-chevron-right"></i></a></li></ul></nav>
  </div>



        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
            
  <script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=7577466525365805616' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>

  <div class="sidebar-module sidebar-module-inset">
    <h4>扫码手机浏览</h4>
    <img src="/images/1484203166.png" alt="扫码，手机浏览www.liuboping.com">
</div>


  <div class="sidebar-module sidebar-module-inset">
    <h4>推荐</h4>
    <ul class="affiliate">
        <li><a href="https://www.netdedi.com/?affid=32" target="_blank">韩国SK/KT机房VPS 堪比双线 支付宝</a></li>
        <li><a href="https://bwh1.net/aff.php?aff=12296" target="_blank">电信联通直连的美国洛杉矶VPS</a></li>
        <li><a href="http://union-click.jd.com/jdc?d=tHqlJ8" target="_blank">
                机器学习 击败AlphaGo的武林秘籍</a></li>
        <li><a href="http://union-click.jd.com/jdc?d=Nmcud1" target="_blank">
                <img src="http://wx2.sinaimg.cn/large/0060hWkWly1fbp26f4da6j30a008cdgs.jpg"
                     alt="京东云主机"></a></li>
    </ul>
</div>


  


  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/CN2/">CN2</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/DNS/">DNS</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/SS/">SS</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/VPS/">VPS</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/主机配置/">主机配置</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/云计算/">云计算</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/双线主机/">双线主机</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/攒机/">攒机</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/架构/">架构</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/游戏/">游戏</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/理财/">理财</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/网络/">网络</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tag Cloud</h4>
    <p class="tagcloud">
      <a href="/tags/CN2/" style="font-size: 15px;">CN2</a> <a href="/tags/DNS/" style="font-size: 15px;">DNS</a> <a href="/tags/SS/" style="font-size: 10px;">SS</a> <a href="/tags/VPS/" style="font-size: 20px;">VPS</a> <a href="/tags/主机配置/" style="font-size: 10px;">主机配置</a> <a href="/tags/云计算/" style="font-size: 10px;">云计算</a> <a href="/tags/双线主机/" style="font-size: 10px;">双线主机</a> <a href="/tags/攒机/" style="font-size: 10px;">攒机</a> <a href="/tags/架构/" style="font-size: 10px;">架构</a> <a href="/tags/游戏/" style="font-size: 10px;">游戏</a> <a href="/tags/理财/" style="font-size: 10px;">理财</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a>
    </p>
  </div>


  
  <div class="sidebar-module">
    <h4>归档</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/12/">十二月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/11/">十一月 2017</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/10/">十月 2017</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/09/">九月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/08/">八月 2017</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/06/">六月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/02/">二月 2017</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/01/">一月 2017</a><span class="sidebar-module-list-count">18</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>最新文章</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2017-12-05/使用git自动部署项目.html">使用git自动部署项目</a>
        </li>
      
        <li>
          <a href="/2017-11-07/2018年推荐购买361°运动系列服装.html">2018年推荐购买361°运动系列服装</a>
        </li>
      
        <li>
          <a href="/2017-11-06/青春痘粉刺的罪魁祸首——碱性洗面奶.html">青春痘粉刺的罪魁祸首——碱性洗面奶</a>
        </li>
      
        <li>
          <a href="/2017-11-03/创建npm项目的正确姿势.html">创建npm项目的正确姿势</a>
        </li>
      
        <li>
          <a href="/2017-10-30/一键安装SSR酸酸乳最新版auth-chain-b.html">一键安装SSR酸酸乳最新版auth_chain_b</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
</div>
<footer class="blog-footer">
    <div class="container">
        <div id="footer-info" class="inner">
            &copy; 2017
            <br>
            此网站由
            <a href="http://hexo.io/" target="_blank">Hexo</a>
            搭建，运行在
            <a href="https://bwh1.net/aff.php?aff=12296">此VPS</a>上
        </div>
    </div>
</footer>



<script src="//lib.baomitu.com/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="//lib.baomitu.com/twitter-bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>

</body>
</html>
